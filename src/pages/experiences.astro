---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Journeys Through Bali" description="Experience the island beyond the ordinary. Discover Bali region by region — from sacred mountain villages to serene coastlines." stickyHeader={false}>

  <!-- ==============================
       1. HERO SECTION
       ============================== -->
  <section id="exp-hero" class="relative h-screen flex items-center justify-center bg-stone-950 overflow-hidden">
    <!-- Premium darker overlay for text readability -->
    <div class="exp-hero-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1537953773345-d172ccf13cf1?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center will-change-transform" style="transform: scale(1.1);"></div>
    <div class="absolute inset-0 bg-linear-to-b from-stone-950/60 via-stone-950/40 to-stone-950/80 z-10"></div>
    
    <div class="relative z-20 text-center px-6 max-w-5xl mx-auto h-full flex flex-col justify-center">
      <div class="hero-content space-y-8">
        <p class="exp-hero-sub font-sans text-xs md:text-sm text-gold-400 tracking-[0.3em] uppercase opacity-0 translate-y-8">
          The Island of the Gods
        </p>
        <h1 class="exp-hero-title font-serif text-6xl md:text-8xl lg:text-9xl text-stone-50 leading-[0.9] tracking-tight opacity-0 translate-y-8">
          Journeys<br/><span class="italic text-gold-200">Through</span> Bali
        </h1>
        <div class="w-24 h-px bg-gold-500/50 mx-auto exp-hero-line opacity-0 scale-x-0"></div>
        <p class="exp-hero-desc text-stone-300 text-lg md:text-xl font-serif italic max-w-2xl mx-auto leading-relaxed opacity-0 translate-y-8">
          "Bali is a living culture shaped by devotion, nature, and balance. <br class="hidden md:block"/>Every region holds its own rhythm."
        </p>
      </div>
      
      <div class="absolute bottom-12 left-0 right-0 text-center exp-hero-scroll opacity-0">
        <span class="text-[10px] uppercase tracking-widest text-stone-400">Scroll to Explore</span>
        <div class="h-12 w-px bg-stone-500/30 mx-auto mt-4"></div>
      </div>
    </div>
  </section>

  <!-- ==============================
       2. REGIONAL JOURNEY OPENING
       ============================== -->
  <section id="regions-intro" class="relative min-h-[80vh] flex items-center justify-center overflow-hidden bg-stone-950 py-24">
    <!-- Background Texture -->
    <div class="absolute inset-0 bg-grid-pattern pointer-events-none"></div>

    <div class="relative z-10 w-full max-w-7xl mx-auto px-6 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      
      <!-- Text Content -->
      <div class="order-2 lg:order-1 text-center lg:text-left">
        <p class="region-intro-label text-gold-500 text-xs uppercase tracking-[0.3em] mb-6 opacity-0 translate-y-4">Our Regions</p>
        <h2 class="region-intro-headline font-serif text-4xl md:text-6xl text-stone-50 leading-[1.1] mb-8 opacity-0 translate-y-6">
          There’s no corner of Bali<br/>we haven’t explored.
        </h2>
        <div class="region-intro-text space-y-6 text-stone-400 text-base md:text-lg leading-relaxed max-w-xl mx-auto lg:mx-0 opacity-0 translate-y-6">
          <p>
            From sacred mountain villages in the east to serene northern coastlines and vibrant southern shores, we know every rhythm of this island.
          </p>
          <p>
            Each region tells a different story — and each journey begins with understanding the land.
          </p>
        </div>
      </div>

      <!-- 3D Map Visual Placeholder -->
      <div class="order-1 lg:order-2 flex justify-center items-center region-intro-visual opacity-0 scale-95">
        <div class="relative w-[300px] h-[300px] md:w-[500px] md:h-[500px]">
          <!-- Abstract Terrain "Map" using rice terrace texture -->
          <div class="absolute inset-0 bg-gradient-to-tr from-gold-900/20 to-stone-800/20 rounded-full blur-3xl animate-pulse-slow"></div>
          <div class="relative z-10 w-full h-full rounded-full overflow-hidden border border-white/5 shadow-2xl">
            <div class="absolute inset-0 bg-stone-900/60 z-10 mix-blend-multiply"></div>
            <img 
              src="https://images.unsplash.com/photo-1604999333679-b86d54738315?auto=format&fit=crop&w=800&q=80" 
              alt="Bali Terrain Map" 
              class="w-full h-full object-cover grayscale contrast-125 opacity-60"
            />
            <!-- Overlay to make it look like a 3D sphere/map -->
            <div class="absolute inset-0 bg-[radial-gradient(circle,transparent_20%,rgba(12,10,9,0.4)_60%,#0c0a09_100%)] z-20"></div>
            <!-- Glowing dots representing regions -->
            <div class="absolute top-1/2 left-1/2 w-1.5 h-1.5 bg-gold-400 rounded-full shadow-[0_0_10px_2px_rgba(212,168,75,0.8)] z-30 transform -translate-x-4 -translate-y-8"></div>
            <div class="absolute top-1/3 left-1/2 w-1 h-1 bg-white/50 rounded-full z-30 transform translate-x-8"></div>
            <div class="absolute bottom-1/3 left-1/3 w-1 h-1 bg-white/50 rounded-full z-30"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==============================
       3. REGIONAL STACKING SECTIONS (CLEAN REFERENCE STYLE)
       ============================== -->
  <div id="regions-stack" class="relative bg-stone-950 pb-24">
    <div class="relative w-full max-w-[98%] mx-auto">
      
      <!-- UBUD -->
      <section class="region-panel sticky top-0 z-10 h-screen w-full rounded-t-[3rem] overflow-hidden shadow-[0_-20px_60px_-15px_rgba(0,0,0,0.8)] border-t border-white/10" data-region="ubud">
        <div class="region-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1558005530-a7958896ec60?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center"></div>
        <!-- Deep moody gradient for the "cleanest" look -->
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 bg-linear-to-b from-transparent via-black/20 to-black/80"></div>
        
        <div class="relative z-10 h-full flex flex-col items-center justify-center text-center px-6">
          <div class="region-content flex flex-col items-center">
            <h2 class="font-sans font-bold text-6xl md:text-8xl lg:text-9xl text-white mb-4 tracking-tight uppercase drop-shadow-2xl">
              Ubud
            </h2>
            <p class="font-sans text-xs md:text-sm text-stone-300 tracking-[0.3em] uppercase mb-12 drop-shadow-lg font-medium">
              Central Bali • Art & Spirit
            </p>
            
            <a href="/destinations#ubud" class="group flex items-center gap-4 bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-full pl-6 pr-1.5 py-1.5 transition-all duration-500 ease-out">
              <span class="text-xs font-medium uppercase tracking-widest text-white pl-2">Explore</span>
              <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-stone-950 group-hover:scale-110 transition-transform duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform -rotate-45 group-hover:rotate-0 transition-transform duration-500"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- NORTH BALI -->
      <section class="region-panel sticky top-0 z-20 h-screen w-full rounded-t-[3rem] overflow-hidden shadow-[0_-20px_60px_-15px_rgba(0,0,0,0.8)] border-t border-white/10" data-region="north">
        <div class="region-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1512100356356-de1b84283e18?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 bg-linear-to-b from-transparent via-black/20 to-black/80"></div>
        
        <div class="relative z-10 h-full flex flex-col items-center justify-center text-center px-6">
          <div class="region-content flex flex-col items-center">
            <h2 class="font-sans font-bold text-6xl md:text-8xl lg:text-9xl text-white mb-4 tracking-tight uppercase drop-shadow-2xl">
              North Bali
            </h2>
            <p class="font-sans text-xs md:text-sm text-stone-300 tracking-[0.3em] uppercase mb-12 drop-shadow-lg font-medium">
              Lovina & Munduk • Untouched
            </p>
            
            <a href="/destinations#north" class="group flex items-center gap-4 bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-full pl-6 pr-1.5 py-1.5 transition-all duration-500 ease-out">
              <span class="text-xs font-medium uppercase tracking-widest text-white pl-2">Discover</span>
              <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-stone-950 group-hover:scale-110 transition-transform duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform -rotate-45 group-hover:rotate-0 transition-transform duration-500"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- EAST BALI -->
      <section class="region-panel sticky top-0 z-30 h-screen w-full rounded-t-[3rem] overflow-hidden shadow-[0_-20px_60px_-15px_rgba(0,0,0,0.8)] border-t border-white/10" data-region="east">
        <div class="region-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1552733407-5d5c46c3bb3b?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 bg-linear-to-b from-transparent via-black/20 to-black/80"></div>
        
        <div class="relative z-10 h-full flex flex-col items-center justify-center text-center px-6">
          <div class="region-content flex flex-col items-center">
            <h2 class="font-sans font-bold text-6xl md:text-8xl lg:text-9xl text-white mb-4 tracking-tight uppercase drop-shadow-2xl">
              East Bali
            </h2>
            <p class="font-sans text-xs md:text-sm text-stone-300 tracking-[0.3em] uppercase mb-12 drop-shadow-lg font-medium">
              Sidemen & Amed • Heritage
            </p>
            
            <a href="/destinations#east" class="group flex items-center gap-4 bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-full pl-6 pr-1.5 py-1.5 transition-all duration-500 ease-out">
              <span class="text-xs font-medium uppercase tracking-widest text-white pl-2">Experience</span>
              <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-stone-900 group-hover:scale-110 transition-transform duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform -rotate-45 group-hover:rotate-0 transition-transform duration-500"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- SOUTH BALI -->
      <section class="region-panel sticky top-0 z-40 h-screen w-full rounded-t-[3rem] overflow-hidden shadow-[0_-20px_60px_-15px_rgba(0,0,0,0.8)] border-t border-white/10" data-region="south">
        <div class="region-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1539367628448-4bc5c9d171c8?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 bg-linear-to-b from-transparent via-black/20 to-black/80"></div>
        
        <div class="relative z-10 h-full flex flex-col items-center justify-center text-center px-6">
          <div class="region-content flex flex-col items-center">
            <h2 class="font-sans font-bold text-6xl md:text-8xl lg:text-9xl text-white mb-4 tracking-tight uppercase drop-shadow-2xl">
              South Bali
            </h2>
            <p class="font-sans text-xs md:text-sm text-stone-300 tracking-[0.3em] uppercase mb-12 drop-shadow-lg font-medium">
              Uluwatu & Canggu • Coastal
            </p>
            
            <a href="/destinations#south" class="group flex items-center gap-4 bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-full pl-6 pr-1.5 py-1.5 transition-all duration-500 ease-out">
              <span class="text-xs font-medium uppercase tracking-widest text-white pl-2">Explore</span>
              <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-stone-900 group-hover:scale-110 transition-transform duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform -rotate-45 group-hover:rotate-0 transition-transform duration-500"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- WEST BALI -->
      <section class="region-panel sticky top-0 z-50 h-screen w-full rounded-t-[3rem] overflow-hidden shadow-[0_-20px_60px_-15px_rgba(0,0,0,0.8)] border-t border-white/10" data-region="west">
        <div class="region-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1518002054494-3a6f94352e9d?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 bg-linear-to-b from-transparent via-black/20 to-black/80"></div>
        
        <div class="relative z-10 h-full flex flex-col items-center justify-center text-center px-6">
          <div class="region-content flex flex-col items-center">
            <h2 class="font-sans font-bold text-6xl md:text-8xl lg:text-9xl text-white mb-4 tracking-tight uppercase drop-shadow-2xl">
              West Bali
            </h2>
            <p class="font-sans text-xs md:text-sm text-stone-300 tracking-[0.3em] uppercase mb-12 drop-shadow-lg font-medium">
              Menjangan & Pemuteran • Wild
            </p>
            
            <a href="/destinations#west" class="group flex items-center gap-4 bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-full pl-6 pr-1.5 py-1.5 transition-all duration-500 ease-out">
              <span class="text-xs font-medium uppercase tracking-widest text-white pl-2">Discover</span>
              <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-stone-900 group-hover:scale-110 transition-transform duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform -rotate-45 group-hover:rotate-0 transition-transform duration-500"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </div>
            </a>
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- ==============================
       4. CULTURE & SUSTAINABILITY (Magazine Style)
       ============================== -->
  <section id="culture-section" class="relative bg-stone-50 py-32 overflow-hidden">
    <div class="max-w-7xl mx-auto px-6 lg:px-12">
      
      <!-- Section Header -->
      <div class="text-center mb-24 reveal">
        <span class="text-gold-600 text-xs font-bold uppercase tracking-[0.3em]">Our Philosophy</span>
        <h2 class="font-serif text-5xl md:text-7xl text-stone-900 mt-6">Living Heritage</h2>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-0 items-center">
        <!-- Image Grid (Left) -->
        <div class="lg:col-span-7 grid grid-cols-2 gap-4 md:gap-8">
          <div class="space-y-4 md:space-y-8 mt-12">
            <div class="aspect-[3/4] overflow-hidden rounded-sm reveal-scale">
              <img src="https://images.unsplash.com/photo-1559628233-100c798642d4?auto=format&fit=crop&w=600&q=80" alt="Daily Offerings" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"/>
            </div>
            <div class="aspect-square overflow-hidden rounded-sm reveal-scale">
              <img src="https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&w=600&q=80" alt="Temple Detail" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"/>
            </div>
          </div>
          <div class="space-y-4 md:space-y-8">
            <div class="aspect-square overflow-hidden rounded-sm reveal-scale">
              <img src="https://images.unsplash.com/photo-1544644181-1484b3fdfc62?auto=format&fit=crop&w=600&q=80" alt="Ceremony" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"/>
            </div>
            <div class="aspect-[3/4] overflow-hidden rounded-sm reveal-scale">
              <img src="https://images.unsplash.com/photo-1555400038-63f5ba517a47?auto=format&fit=crop&w=600&q=80" alt="Water Palace" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"/>
            </div>
          </div>
        </div>

        <!-- Text Content (Right) -->
        <div class="lg:col-span-5 lg:pl-16 relative">
          <div class="absolute -top-12 -left-8 text-9xl font-serif text-stone-100 -z-10 leading-none select-none">
            "
          </div>
          <blockquote class="font-serif text-3xl md:text-4xl text-stone-800 leading-tight mb-8 reveal">
            Bali's traditions are not performances.<br/>They are lived daily.
          </blockquote>
          <div class="space-y-6 text-stone-600 text-lg leading-relaxed reveal-stagger">
            <p>
              Galungan and Kuningan celebrate the triumph of good over evil. Nyepi, the Day of Silence, brings the island into stillness. Offerings mark each morning with devotion.
            </p>
            <p>
              Across the island, communities prioritise sustainability — from eco-conscious diving practices to preservation of ancient irrigation systems. Travel here is most meaningful when it respects harmony between people, nature, and the divine.
            </p>
          </div>
          <div class="mt-12 reveal">
            <a href="/sustainability" class="btn-primary-light border border-stone-200">Read Our Commitments</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==============================
       5. FINAL CTA
       ============================== -->
  <section id="final-cta" class="relative h-[80vh] flex items-center justify-center overflow-hidden bg-stone-900">
    <div class="final-bg absolute inset-0 bg-[url('https://images.unsplash.com/photo-1573790387438-4da905039392?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center will-change-transform opacity-60" style="transform: scale(1.05);"></div>
    <div class="absolute inset-0 bg-gradient-to-t from-stone-950 via-transparent to-stone-950/50"></div>

    <div class="relative z-20 text-center px-6 max-w-4xl mx-auto">
      <h2 class="final-title font-serif text-5xl md:text-7xl lg:text-8xl text-stone-50 leading-[0.9] mb-8 opacity-0 translate-y-8">
        Your Journey<br/>Starts Here
      </h2>
      <p class="final-sub text-stone-200 text-lg md:text-xl leading-relaxed max-w-xl mx-auto mb-12 opacity-0 translate-y-8">
        Every region carries its own story. Let us craft the one that becomes yours.
      </p>
      <div class="final-cta opacity-0 translate-y-8">
        <a href="/begin" class="btn-primary bg-stone-50 text-stone-900 hover:bg-stone-200 border-none">Plan Your Experience</a>
      </div>
    </div>
  </section>

  <!-- ==============================
       PAGE SCRIPT — GSAP Animations
       ============================== -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', initExperiencesPage);
    document.addEventListener('astro:page-load', initExperiencesPage);

    function initExperiencesPage() {
      if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') return;
      gsap.registerPlugin(ScrollTrigger);

      // Kill old triggers for this page
      ScrollTrigger.getAll().forEach(t => {
        if (t.vars && t.vars.id && t.vars.id.startsWith('exp-')) t.kill();
      });

      // ---------- HERO ----------
      const heroTl = gsap.timeline({ defaults: { ease: 'power3.out' } });
      heroTl
        .to('.exp-hero-sub', { opacity: 1, y: 0, duration: 1 }, 0.2)
        .to('.exp-hero-title', { opacity: 1, y: 0, duration: 1.2 }, 0.4)
        .to('.exp-hero-line', { opacity: 1, scaleX: 1, duration: 1 }, 0.6)
        .to('.exp-hero-desc', { opacity: 1, y: 0, duration: 1 }, 0.8)
        .to('.exp-hero-scroll', { opacity: 1, duration: 1 }, 1.0);

      gsap.to('.exp-hero-bg', {
        y: 100, // Parallax effect
        scale: 1.15,
        ease: 'none',
        scrollTrigger: {
          id: 'exp-hero-parallax',
          trigger: '#exp-hero',
          start: 'top top',
          end: 'bottom top',
          scrub: true,
        }
      });

      // ---------- REGIONS INTRO ----------
      const introTl = gsap.timeline({
        scrollTrigger: {
          id: 'exp-region-intro',
          trigger: '#regions-intro',
          start: 'top 70%',
          end: 'top 20%',
          scrub: false,
          toggleActions: 'play none none none',
        }
      });
      introTl
        .to('.region-intro-label', { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' }, 0)
        .to('.region-intro-headline', { opacity: 1, y: 0, duration: 1, ease: 'power3.out' }, 0.15)
        .to('.region-intro-text', { opacity: 1, y: 0, duration: 1, ease: 'power3.out' }, 0.35)
        .to('.region-intro-visual', { opacity: 1, scale: 1, duration: 1.2, ease: 'power3.out' }, 0.2);

      // ---------- STACKING CARDS ----------
      const panels = gsap.utils.toArray('.region-panel');
      if (panels.length === 0) return;

      panels.forEach((panel, i) => {
        // Card Content Reveal - simple fade in without background animation
        const content = panel.querySelector('.region-content');
        if (content) {
          gsap.set(content, { opacity: 1, y: 0 });
        }
      });

      // ---------- FINAL CTA ----------
      const finalTl = gsap.timeline({
        scrollTrigger: {
          id: 'exp-final',
          trigger: '#final-cta',
          start: 'top 60%',
          toggleActions: 'play none none none',
        }
      });

      finalTl
        .to('.final-title', { opacity: 1, y: 0, duration: 1.2, ease: 'power3.out' }, 0)
        .to('.final-sub', { opacity: 1, y: 0, duration: 1, ease: 'power3.out' }, 0.2)
        .to('.final-cta', { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' }, 0.4);

      gsap.to('.final-bg', {
        scale: 1.15,
        ease: 'none',
        scrollTrigger: {
          id: 'exp-final-bg',
          trigger: '#final-cta',
          start: 'top bottom',
          end: 'bottom top',
          scrub: true,
        }
      });
    }
  </script>
</Layout>
